<div class="corregir position-relative">
  <div class="position-absolute error-msg">
    <div *ngIf="(ErrorMessage != null || ErrorMessage != undefined )" class="alert alert-danger" id="danger">
      <strong>{{ErrorMessage}}</strong>
    </div>
    <div *ngIf="anadeNota != null" class=" alert alert-success">
      {{anadeNota}}
    </div>
  </div>

  <!-- <div class="loading" *ngIf="Deshabilitar">
    <app-loading></app-loading>
  </div> -->

  <div class="pt-5" [ngClass]="('' + (Deshabilitar ? 'disabled' : ''))" *ngIf="InfoAsignacion.preguntas !=  null">
    <div class="row m-0">
      <div class="col-xs-12 col-sm-2 col-md-3"></div>
      <div class="col-xs-12 col-sm-8 col-md-6 text-center">
        <div class="container-fluid">
          <div class="row justify-content-md-center">
            <div class="col"></div>
            <div class="col-md-auto">
              <h2 class="d-inline">{{SectionSelected.nombre}}</h2>
            </div>
            <div class="col mt-1 position-relative">
              <div class="position-absolute btn-ab">
                <button class="transparente ml-4 position-relative" (click)="AbrirModalSec(notasSec)" title="Añadir notas">
                  <span *ngIf="SectionSelected.notas != null" class="one-badge">1</span>
                  <i *ngIf="SectionSelected.notas != null" class="material-icons comment-added" title="Añadir notas">
                    fiber_manual_record
                  </i>
                  <i class="material-icons add-comment" alt="Añadir comentario">add_circle</i>
                  <!-- <img *ngIf="SectionSelected.notas == null" height="30" src="assets/note-add-outline.svg" title="Añadir notas" /> -->
                </button></div>

            </div>

          </div>
          <!-- <div class="col-1">
            <button class="transparente ml-4 position-relative" (click)="AbrirModalSec(notasSec)" title="Añadir notas">
              <span *ngIf="SectionSelected.notas != null" class="one-badge">1</span>
              <i *ngIf="SectionSelected.notas != null" class="material-icons comment-added" title="Añadir notas">
                fiber_manual_record
              </i>
              <i class="material-icons add-comment" alt="Añadir comentario">add_circle</i> -->
          <!-- <img *ngIf="SectionSelected.notas == null" height="30" src="assets/note-add-outline.svg" title="Añadir notas" /> -->
          <!-- </button></div> -->



        </div>


      </div>
      <div class="col-xs-12 col-sm-2 col-md-3"></div>
    </div>
    <div class="row m-0 mb-3">
      <div class="col-xs-12 col-sm-2 col-md-3"></div>
      <div class="col-xs-12 col-sm-8 col-md-6">
        <!-- <h2>
          {{InfoAsignacion.nombre}}

          <button class="transparente ml-4 position-relative asignacion-notas" (click)="AbrirModalAsig(notasAsset)">
            <span *ngIf="InfoAsignacion.notas != null" class="one-badge">1</span>
            <i *ngIf="InfoAsignacion.notas != null" class="material-icons comment-added" title="Añadir notas">
              fiber_manual_record
            </i> -->
        <!-- <img *ngIf="InfoAsignacion.notas != null" height="40" src="assets/note-add.svg" title="Añadir notas" /> -->
        <!-- <img *ngIf="InfoAsignacion.notas == null" height="40" src="assets/note-add-outline.svg" title="Añadir notas" /> -->
        <!-- <i class="material-icons add-comment" alt="Añadir comentario">add_circle</i>
          </button>
        </h2> -->

        <div class="container-fluid">
          <div class="row justify-content-md-center">
            <div class="col"></div>
            <div class="col-md-auto">
              <h2 class="d-inline">{{InfoAsignacion.nombre}}</h2>
            </div>
            <div class="col mt-1 position-relative">
              <div class="position-absolute btn-ab">
                <button class="transparente ml-4 position-relative asignacion-notas" (click)="AbrirModalAsig(notasAsset)">
                  <span *ngIf="InfoAsignacion.notas != null" class="one-badge">1</span>
                  <i *ngIf="InfoAsignacion.notas != null" class="material-icons comment-added" title="Añadir notas">
                    fiber_manual_record
                  </i>
                  <!-- <img *ngIf="InfoAsignacion.notas != null" height="40" src="assets/note-add.svg" title="Añadir notas" /> -->
                  <!-- <img *ngIf="InfoAsignacion.notas == null" height="40" src="assets/note-add-outline.svg" title="Añadir notas" /> -->
                  <i class="material-icons add-comment" alt="Añadir comentario">add_circle</i>
                </button>
              </div>

            </div>

          </div>
          <!-- <div class="col-1">
              <button class="transparente ml-4 position-relative" (click)="AbrirModalSec(notasSec)" title="Añadir notas">
                <span *ngIf="SectionSelected.notas != null" class="one-badge">1</span>
                <i *ngIf="SectionSelected.notas != null" class="material-icons comment-added" title="Añadir notas">
                  fiber_manual_record
                </i>
                <i class="material-icons add-comment" alt="Añadir comentario">add_circle</i> -->
          <!-- <img *ngIf="SectionSelected.notas == null" height="30" src="assets/note-add-outline.svg" title="Añadir notas" /> -->
          <!-- </button></div> -->



        </div>

      </div>

      <div class="col-xs-12 col-sm-2 col-md-3"></div>
    </div>

    <div class="row dots m-0">
      <div class="col">
        <div class="d-flex justify-content-center">
          <div class="position-relative">
            <ul class="d-flex justify-content-center">
              <li *ngFor="let page of pagesArray; let i = index" [class.current]="i==PageNow-1"><a href="#">x</a></li>
              <!-- <li class=""><a href="#">Home</a></li>
                    <li class="current"><a href="#">About</a></li>
                    <li class=""><a href="#">Products</a></li>
                    <li class=""><a href="#">Portfolio</a></li>
                    <li class=""><a href="#">Blog</a></li>
                    <li class=""><a href="#">Contact</a></li> -->
            </ul>
            <i class="material-icons pointer b-f-buttons position-absolute back-btn" [ngClass]="{'disabled': PageNow == 1}"
              (click)="NextPreviousButton(2)">
              arrow_back_ios
            </i>

            <i class="material-icons pointer b-f-buttons position-absolute next-btn" [ngClass]="{'disabled': PageNow == NumMax}"
              (click)="NextPreviousButton(1)">
              arrow_forward_ios
            </i>
          </div>
        </div>


      </div>

    </div>

    <!-- Inicio preguntas  -->
    <div class="questions-box mt-4">
      <div class="row m-0" id="preguntas" *ngFor="let preguntaDada of InfoAsignacion.preguntas; let i = index">
        <div class="col-xs-12 col-sm-2 col-md-2"></div>
        <div class="col-xs-12 col-sm-5 col-md-5">
          {{i + 1}}. {{preguntaDada.pregunta}}
        </div>
        <div class="col-xs-12 col-sm-2 col-md-2 col-lg-1 text-center" id="switch">

          <div class="container" [ngClass]="{'disabled': InfoAsignacion.preguntas[0].correcta == null && InfoAsignacion.preguntas[0].respuesta.estado != 1 && i != 0}">
            <div class="button-wrap">
              <div class="onoffswitch">
                <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="{{preguntaDada.respuesta.id}}"
                  (click)="ChangeEstadoDB(i)" [checked]="(preguntaDada.respuesta.estado == 1)">
                <label class="onoffswitch-label" for="{{preguntaDada.respuesta.id}}">
                  <span [ngClass]="{'onoffswitch-inner-inactivo': preguntaDada.respuesta.estado == 0,
                      'onoffswitch-inner': preguntaDada.respuesta.estado != 0}"></span>
                  <span [ngClass]="{'onoffswitch-switch-inactivo': preguntaDada.respuesta.estado == 0,
                      'onoffswitch-switch': preguntaDada.respuesta.estado != 0}"></span>
                </label>
              </div>
            </div>
          </div>

        </div>
        <div class="col-xs-12 col-sm-1 col-md-1 col-lg-2 text-center pb-1">
          <button *ngIf="preguntaDada.respuesta.notas != null && !(InfoAsignacion.preguntas[0].correcta == null && InfoAsignacion.preguntas[0].respuesta.estado != 1 && i != 0)"
            class="transparente position-relative" (click)="AbrirModalPreg(notasPreg, i)">
            <!-- <img height="40" src="assets/note-add.svg" title="Añadir notas" />
           -->
            <span *ngIf="preguntaDada.respuesta.notas != null" class="one-badge">1</span>
            <i *ngIf="preguntaDada.respuesta.notas != null" class="material-icons comment-added" title="Añadir notas">
              fiber_manual_record
            </i>

            <i class="material-icons add-comment" alt="Añadir comentario">add_circle</i>

          </button>

          <button *ngIf="preguntaDada.respuesta.notas == null && !(InfoAsignacion.preguntas[0].correcta == null && InfoAsignacion.preguntas[0].respuesta.estado != 1 && i != 0)"
            class="transparente" (click)="AbrirModalPreg(notasPreg, i)">
            <!-- <img height="40" src="assets/note-add-outline.svg" title="Añadir notas" /> -->
            <!-- <i class="zmdi zmdi-comment-outline"></i> -->
            <i class="material-icons add-comment" alt="Añadir comentario">add_circle</i>
          </button>

          <button *ngIf="preguntaDada.respuesta.notas != null && InfoAsignacion.preguntas[0].correcta == null && InfoAsignacion.preguntas[0].respuesta.estado != 1 && i != 0"
            class="transparente position-relative disabled">
            <!-- <img height="40" src="assets/note-add.svg" class="disabledButton" title="Añadir notas" />
           -->
            <span *ngIf="preguntaDada.respuesta.notas != null" class="one-badge">1</span>
            <i *ngIf="preguntaDada.respuesta.notas != null" class="material-icons comment-added" title="Añadir notas">
              fiber_manual_record
            </i>
            <i class="material-icons add-comment" alt="Añadir comentario">add_circle</i>
          </button>

          <button *ngIf="preguntaDada.respuesta.notas == null && InfoAsignacion.preguntas[0].correcta == null && InfoAsignacion.preguntas[0].respuesta.estado != 1 && i != 0"
            class="transparente disabled">
            <!-- <img height="40" src="assets/note-add-outline.svg" class="disabledButton" title="Añadir notas" /> -->
            <i class="material-icons add-comment" alt="Añadir comentario">add_circle</i>
          </button>
        </div>

        <br />
      </div>
    </div>
    <!-- Fin de preguntas -->

    <div class="wrapper row m-0" *ngIf="InfoAsignacion.preguntas != null && InfoAsignacion.preguntas.length != 0">
      <!-- <button type="button" class="btn btn-outline-success" [ngClass]="{'disabled': PageNow == 1}" (click)="NextPreviousButton(2)">Anterior</button> -->

      <div class="col-2"></div>
      <div class="col">
        <div class="row m-0 p-0">
          <div class="col-3"></div>
          <div class="col-6 questions-pagination">
            <!-- <div class="d-inline-block vert-align">
              <div style="height:3px"></div>
              <i class="material-icons pointer b-f-buttons" [ngClass]="{'disabled': PageNow == 1}" (click)="NextPreviousButton(2)">
                arrow_back_ios
              </i>
            </div>
            <div class="d-inline-block">
              <strong>
                {{PageNow}} / {{NumMax}}
              </strong>
            </div>
            <div class="d-inline-block vert-align">
              <div style="height:3px"></div>
              <i class="material-icons pointer b-f-buttons" [ngClass]="{'disabled': PageNow == NumMax}" (click)="NextPreviousButton(1)">
                arrow_forward_ios
              </i>
            </div> -->
          </div>
          <div class="col-2">
            <button type="button" *ngIf="PageNow != NumMax" class="main-button mat-elevation-z5 finalizar-button"
              (click)="NextPreviousButton(0)">Volver</button>
            <button type="button" class="main-button mat-elevation-z5 finalizar-button" *ngIf="PageNow == NumMax"
              (click)="NextPreviousButton(0)">Finalizar</button>
          </div>
          <div class="col-1"></div>
        </div>


        <!-- <button type="button" class="btn btn-outline-success" *ngIf="PageNow != NumMax" (click)="NextPreviousButton(1)">Siguiente</button> -->

      </div>

      <div class="col-2"></div>
    </div>
    <!-- <div class="wrapper mt-2">
      <i class="material-icons pointer" [ngClass]="{'disabled': PageNow == 1}" (click)="NextPreviousButton(0)">
            arrow_forward_ios
            </i>
      <button type="button" *ngIf="PageNow != NumMax" class="btn btn-info inicio" (click)="NextPreviousButton(0)">Volver</button>
    </div> -->
  </div>

  <ng-template #notasPreg let-cl="close" let-di="dismiss">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Notas Pregunta</h5> <button type="button" class="close" (click)="cl('Cerrar')">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <div class="modal-body">
        <textarea class="form-control" maxlength="4000" placeholder="Inserte aquí el texto" rows="10" [(ngModel)]="textoModal"></textarea>
      </div>
      <div class="modal-footer">
        <p id="numletras" class="mr-2 mt-2">{{textoModal.length}}/4000</p>
        <button type="button" class="btn btn-success finalizar" (click)="di('Guardar')">Guardar</button>
        <button type="button" class="btn btn-secondary" (click)="cl('Cerrar')">Cancelar</button>
      </div>
    </div>
  </ng-template>

  <ng-template #notasAsset let-cl="close" let-di="dismiss">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Notas Módulo</h5> <button type="button" class="close" (click)="cl('Cerrar')">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <div class="modal-body">
        <textarea class="form-control" maxlength="4000" placeholder="Inserte aquí el texto" rows="10" [(ngModel)]="textoModal"></textarea>
      </div>
      <div class="modal-footer">
        <p id="numletras" class="mr-2 mt-2">{{textoModal.length}}/4000</p>
        <button type="button" class="btn btn-success finalizar" (click)="di('Guardar')">Guardar</button>
        <button type="button" class="btn btn-secondary" (click)="cl('Cerrar')">Cancelar</button>
      </div>
    </div>
  </ng-template>

  <ng-template #notasSec let-cl="close" let-di="dismiss">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Notas Sección</h5> <button type="button" class="close" (click)="cl('Cerrar')">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <div class="modal-body">
        <textarea class="form-control" maxlength="4000" placeholder="Inserte aquí el texto" rows="10" [(ngModel)]="textoModal"></textarea>
      </div>
      <div class="modal-footer">
        <p id="numletras" class="mr-2 mt-2">{{textoModal.length}}/4000</p>
        <button type="button" class="btn btn-success finalizar" (click)="di('Guardar')">Guardar</button>
        <button type="button" class="btn btn-secondary" (click)="cl('Cerrar')">Cancelar</button>
      </div>
    </div>
  </ng-template>

</div>
<br />
